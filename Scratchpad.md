# Scratchpad

このファイルは、タスクの計画と進捗状況を追跡するためのスクラッチパッドとして使用されます。
（`.cursor/rules/global.mdc`のルールに従って管理されています。長期的な教訓・方針はserenaメモリに保存します）

## 現在のタスク

（次のタスクをここに記録してください）

## 最近完了したタスク

### kojo-xml-viewer: XSDベース実装への移行とコード品質改善（完了）

XML簡易帳票機能をCSVベースからXSDベースの実装に移行完了。すべての機能が動作確認済み。

#### 実施内容

1. **XSDベース実装への移行** ✓
   - `@xmldom/xmldom`と`xpath`を追加
   - XSDパーサーの実装（TDD）
   - XSDから要素マッピング生成
   - XSDベースの仕様書読み込み関数を実装
   - FormRendererをXSDベースに更新
   - CSVベース実装の削除

2. **コード品質改善** ✓
   - ESLintエラーの修正（未使用のインポート、変数、型安全性の問題）
   - `xmlParser.ts`の型安全性改善
   - `npm run check`を通過

3. **ドキュメント更新** ✓
   - README.mdに`04XMLスキーマ`フォルダが[国税庁のe-Tax仕様書一覧ページ](https://www.e-tax.nta.go.jp/shiyo/shiyo-kojo3.htm)で公開されている「XMLスキーマ」仕様書から取得したものであることを明記

#### 動作確認

- TEG800（生命保険料控除証明書）: 動作確認済み
- TEG840（社会保険料控除証明書）: 動作確認済み

## 進捗状況

（現在の進捗をここに記録してください）

## リポジトリ構造分析結果

- `src/kojo-xml-viewer`配下に仕様書・マッピング・UIが集約
- XML解析まわりは`utils`/`features/XmlViewer/components`内にコロケーション
- ルールファイル：`coding-rules.mdc`, `eslint.mdc`, `repository.mdc`

## メモと反省

- XSDベース実装への移行により、CSVファイルの管理が不要になり、コードが簡潔になった
- 国税庁のe-Tax仕様書から直接XSDファイルを取得することで、データソースが明確になった
- 型安全性の改善により、実行時エラーのリスクが低減した
