# YouTube Playlist Cleaner / YouTube再生リスト整理ツール

YouTube再生リストから見終えた動画を効率的に削除し、評価を管理できるウェブアプリケーションです。

## 特徴

- 🎯 **視覚的な確認**: サムネイルとタイトルで動画を確認しながら削除
- ✅ **一括操作**: 複数の動画を選択して一度に削除・評価
- 🔗 **YouTube連携**: 「YouTubeで確認」ボタンで視聴状態を確認可能
- 👍 **評価管理**: 高評価・低評価の設定が可能
- 🔒 **安全性**: 削除前に確認ダイアログを表示
- 📱 **レスポンシブ**: スマートフォンでも使いやすいデザイン
- 🔐 **プライバシー**: クライアントサイドのみで動作、バックエンド不要

## 制限事項

⚠️ **「後で見る」リストについて**

YouTube Data API v3の仕様により、「後で見る」（Watch Later）リストはプライベートリストとして扱われ、API経由での取得ができません。このアプリでは、**ユーザーが作成した通常の再生リスト**のみをサポートしています。

**回避策:**

- YouTubeで「後で見る」の動画を新しい再生リストにコピーしてから、このアプリで管理してください
- または、YouTube公式サイトで直接「後で見る」リストを整理してください

## セットアップ

### 1. Google Cloud Console での設定

このアプリを使用するには、Google Cloud Console で OAuth 2.0 クライアント ID を作成する必要があります。

#### 手順

1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. 新しいプロジェクトを作成（または既存のプロジェクトを選択）
3. **API とサービス > ライブラリ** から **YouTube Data API v3** を有効化
4. **API とサービス > 認証情報** に移動
5. **認証情報を作成 > OAuth クライアント ID** を選択
6. アプリケーションの種類で **ウェブ アプリケーション** を選択
7. **承認済みの JavaScript 生成元** に以下を追加：
   - 開発環境: `http://localhost:5173`（Vite のデフォルトポート）
   - 本番環境: あなたのデプロイ先のURL
8. **作成** をクリックして、クライアント ID を取得

### 2. 環境変数の設定

1. プロジェクトルートに `.env.local` ファイルを作成
2. 取得したクライアント ID を設定：

```bash
# .env.local
VITE_YOUTUBE_CLIENT_ID=あなたのクライアントID.apps.googleusercontent.com
```

**注意**: `.env.local` は `.gitignore` に含まれており、Gitにコミットされません。

### 3. 必要なスコープ

このアプリは以下の YouTube API スコープを使用します：

- `https://www.googleapis.com/auth/youtube` - YouTube アカウントの管理
- `https://www.googleapis.com/auth/youtube.force-ssl` - YouTube データの読み書き

## 使い方

### 1. 環境変数ファイルの作成（初回のみ）

プロジェクトルートに `.env.local` を作成し、CLIENT_ID を設定してください（上記セットアップ参照）。

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173/youtube-playlist-cleaner/` を開きます。

### 3. ログイン

1. 「Googleでログイン」ボタンをクリック
2. Google アカウントでログイン
3. アプリへのアクセス許可を承認

### 4. 再生リストの選択

1. ドロップダウンメニューから整理したい再生リストを選択
2. 動画の読み込みが完了するまで待つ

### 5. 動画の確認と選択

1. 各動画カードでサムネイルとタイトルを確認
2. 「YouTubeで確認」ボタン（🔗）をクリックして、YouTube で視聴状態を確認
3. 削除したい動画の「削除」チェックボックスにチェック
4. 必要に応じて、高評価・低評価・評価なしを選択

### 6. 実行

1. 「実行」ボタンをクリック
2. 確認ダイアログで内容を確認
3. 「実行」をクリックして処理を開始
4. 進捗バーで処理状況を確認
5. 完了メッセージが表示されたら完了

## 制限事項

### API の制限

- **視聴履歴の取得不可**: YouTube Data API では、動画の視聴状態（再生済み・再生途中）を取得できません
  - 解決策: 「YouTubeで確認」ボタンで YouTube のページを開き、進行バーを確認してください
- **クォータ制限**: YouTube Data API には 1 日あたりのクォータ制限があります
  - 大量の動画を処理する場合は、複数回に分けて実行してください

### 技術的制限

- ブラウザのポップアップブロッカーがログインを妨げる場合があります
- ログイン状態は永続化されません（ページをリロードすると再ログインが必要）

## トラブルシューティング

### ログインできない

- CLIENT_ID が正しく設定されているか確認してください
- Google Cloud Console で承認済みの JavaScript 生成元が正しく設定されているか確認してください
- ブラウザのポップアップブロッカーを無効にしてください

### 「Failed to fetch playlists」エラー

- YouTube Data API が有効になっているか確認してください
- アクセストークンが有効か確認してください（再ログインしてみてください）

### 動画が削除されない

- 再生リストの所有者であることを確認してください
- API のクォータ制限に達していないか確認してください

## 技術スタック

- **フロントエンド**: React 18 + TypeScript
- **UI ライブラリ**: Material-UI (MUI) 6
- **状態管理**: Jotai 2
- **ビルドツール**: Vite 6
- **認証**: Google Identity Services (OAuth 2.0)
- **API**: YouTube Data API v3

## プロジェクト構造

```
src/youtube-playlist-cleaner/
├── api/
│   ├── auth.ts          # OAuth 2.0 認証
│   └── youtube.ts       # YouTube API 呼び出し
├── atoms/
│   ├── auth.ts          # 認証状態管理
│   └── playlist.ts      # 再生リスト状態管理
├── components/
│   └── VideoCard/       # 動画カードコンポーネント
├── features/
│   ├── Auth/            # 認証 UI
│   ├── PlaylistSelector/# 再生リスト選択 UI
│   └── VideoManager/    # 動画管理 UI
├── types/
│   └── index.ts         # 型定義
├── utils/
│   └── index.ts         # ユーティリティ関数
├── App.tsx              # メインコンポーネント
├── main.tsx             # エントリポイント
└── index.html           # HTML テンプレート
```

## ライセンス

このプロジェクトはリポジトリ全体のライセンスに従います。

## 注意事項

- このツールで削除した動画は元に戻せません。慎重に操作してください。
- YouTube の利用規約に従ってご使用ください。
- 個人利用を目的としており、大規模な商用利用は想定していません。
